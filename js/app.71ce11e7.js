(function(t){function e(e){for(var a,n,r=e[0],l=e[1],c=e[2],u=0,m=[];u<r.length;u++)n=r[u],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&m.push(i[n][0]),i[n]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);d&&d(e);while(m.length)m.shift()();return o.push.apply(o,c||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],a=!0,r=1;r<s.length;r++){var l=s[r];0!==i[l]&&(a=!1)}a&&(o.splice(e--,1),t=n(n.s=s[0]))}return t}var a={},i={app:0},o=[];function n(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=a,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(s,a,function(e){return t[e]}.bind(null,a));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/vue2-firebase/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var d=l;o.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0009":function(t,e,s){"use strict";s("f677")},"0547":function(t,e,s){"use strict";s("63b7")},2395:function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[t.user||0!=t.registerPage||0!=t.forgotPage?t._e():s("router-view",{on:{updateFromFirebase:t.updateFromFirebase,registerPageToggle:t.registerPageToggle,forgotPageToggle:t.forgotPageToggle}}),1==t.registerPage?s("router-view",{attrs:{name:"Register"},on:{updateFromFirebase:function(e){return t.updateFromFirebase(t.user)},registerPageToggle:t.registerPageToggle,registerUidSignIn:t.registerUidSignIn}}):t._e(),1==t.forgotPage?s("router-view",{attrs:{name:"Forgot"},on:{forgotPageToggle:t.forgotPageToggle}}):t._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.user,expression:"!user"}],staticClass:"guest"},[t._v(" For Guest test: "),s("button",{staticClass:"guestSignin",on:{click:t.signIn}},[t._v("Sign in")])]),0==t.emailVerified&&"guest@gmail.com"!=t.user.email?s("div",{staticClass:"emailVerified"},[s("div",{ref:"mainInfo",staticClass:"mainInfo show"},[t._v(" This account isn't Verified, make sure you already check validation Email. ")]),s("div",{ref:"resendValidationEmail",staticClass:"resendValidationEmail show",on:{click:t.resendValidationEmail}},[t._v("Send validation email")]),s("div",{ref:"sendSuccess",staticClass:"sendSuccess"},[t._v(" Validation email is sended to "),s("span",{staticStyle:{"font-size":"16px","font-weight":"600",color:"#007DDB"}},[t._v(t._s(t.user.email))]),t._v("! After you checked the validation email, reflesh this page, thx. ")]),s("button",{staticClass:"btn btn-danger btn-sm mt-3",on:{click:t.signOut}},[t._v("Sign out")])]):t._e(),!t.user||1!=t.user.emailVerified&&"guest@gmail.com"!=t.user.email?t._e():s("div",{staticClass:"main-info"},[s("div",{attrs:{id:"header"}},[s("div",{staticClass:"container"},[s("h1",[t._v("Booking System")]),s("span",{staticClass:"text-muted"},[t._v("by vue2-cli with firebase RTDB")]),s("div",{staticClass:"account"},[s("span",[t._v("哈囉，")]),s("span",{staticStyle:{"font-size":"16px","font-weight":"400"}},[t._v(t._s(" "+t.user.displayName))]),s("span",{staticClass:"signOut ml-3",on:{click:t.signOut}},[t._v("登出")])])])]),s("div",{attrs:{id:"content"}},[s("div",{staticClass:"saveSuccess"},[t._v("Save Success!")]),t._m(0),s("div",{staticClass:"container storeArea"},[s("div",{staticClass:"row stores no-gutters"},[t._l(t.store,(function(e){return s("a",{key:e.id,staticClass:"col-12 col-md-6 col-lg-4 col-xl-3 px-2 mb-3 store-item",attrs:{href:"#titleAnchor"},on:{click:t.showDetail}},[s("div",{staticClass:"delete",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.deleteStore(e)}}},[t._v("×")]),s("div",{staticClass:"card",class:{full:0==e.emptyTable},attrs:{"data-store":e.name}},[s("img",{staticClass:"card-img-top",attrs:{src:e.coverUrl?e.coverUrl:t.noCover,alt:"storeImg"}}),s("div",{staticClass:"card-body"},[s("h5",{staticClass:"card-title"},[t._v(t._s(e.name))]),s("p",{staticClass:"card-text"},[t._v("總桌數： "+t._s(e.tables.length))]),s("p",{staticClass:"card-text"},[t._v("空桌數： "+t._s(e.emptyTable))])])])])})),t._m(1)],2)]),t.isShowDetail?s("div",{staticClass:"container"},[t._m(2)]):t._e(),t.isShowDetail?s("div",{staticClass:"container bookingDetail mt-5",attrs:{id:"titleAnchor"}},[s("h3",{staticClass:"title",class:{full:0==t.store[t.storeName].emptyTable}},[t._v(t._s(t.storeName+"店"))]),s("button",{staticClass:"saveButton",on:{click:t.updateInfo}},[t._v("save")]),s("div",{staticClass:"row no-gutters"},[s("div",{staticClass:"col-12 content"},[s("div",{staticClass:"row items no-gutters"},[t._l(t.store[t.storeName].tables,(function(e){return s("div",{key:e.no,staticClass:"col-12 col-md-6 col-lg-4 col-xl-3 item",class:{full:e.isBooking}},[s("div",{staticClass:"info"},[s("div",{staticClass:"info-title d-flex"},[s("h6",[t._v(t._s(e.no+"號桌")+" / "+t._s("座位數"+e.bkInfo.seatCount))]),s("div",{staticClass:"edit-box"},[s("span",{staticClass:"deleteButton",class:{show:e.no==t.store[t.storeName].tables.length},on:{click:function(s){return t.deleteBooking(e)}}},[t._v("delete")]),s("span",{staticClass:"clearButton",on:{click:function(s){return t.clearBooking(e)}}},[t._v("clear")])])]),s("ul",[s("li",{staticClass:"name"},[s("span",{staticClass:"title col-4 col-md-5"},[t._v("姓名")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.bkInfo.name,expression:"table.bkInfo.name"}],staticClass:"col-7",attrs:{type:"text"},domProps:{value:e.bkInfo.name},on:{input:function(s){s.target.composing||t.$set(e.bkInfo,"name",s.target.value)}}})]),s("li",{staticClass:"seat"},[s("span",{staticClass:"title col-4 col-md-5"},[t._v("訂位數")]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.bkInfo.seat,expression:"table.bkInfo.seat",modifiers:{number:!0}}],staticClass:"seat col-7",attrs:{type:"number"},domProps:{value:e.bkInfo.seat},on:{input:function(s){s.target.composing||t.$set(e.bkInfo,"seat",t._n(s.target.value))},blur:function(e){return t.$forceUpdate()}}})]),s("li",{staticClass:"kidSeat"},[s("span",{staticClass:"title col-4 col-md-5"},[t._v("兒童座椅")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.bkInfo.kidSeat,expression:"table.bkInfo.kidSeat"}],staticClass:"col-7",attrs:{type:"number"},domProps:{value:e.bkInfo.kidSeat},on:{input:function(s){s.target.composing||t.$set(e.bkInfo,"kidSeat",s.target.value)}}})]),s("li",{staticClass:"date"},[s("span",{staticClass:"title col-4 col-md-5"},[t._v("日期")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.bkInfo.date,expression:"table.bkInfo.date"}],staticClass:"col-7",attrs:{type:"date"},domProps:{value:e.bkInfo.date},on:{input:function(s){s.target.composing||t.$set(e.bkInfo,"date",s.target.value)}}})]),s("li",{staticClass:"time"},[s("span",{staticClass:"title col-4 col-md-5"},[t._v("時間")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.bkInfo.time,expression:"table.bkInfo.time"}],staticClass:"col-7",attrs:{type:"time"},domProps:{value:e.bkInfo.time},on:{input:function(s){s.target.composing||t.$set(e.bkInfo,"time",s.target.value)}}})]),s("li",{staticClass:"phone"},[s("span",{staticClass:"title col-4 col-md-5"},[t._v("電話")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.bkInfo.phone,expression:"table.bkInfo.phone"}],staticClass:"col-7",attrs:{type:"text"},domProps:{value:e.bkInfo.phone},on:{input:function(s){s.target.composing||t.$set(e.bkInfo,"phone",s.target.value)}}})])])])])})),t._m(3)],2)])])]):t._e(),s("div",{staticClass:"modal fade",attrs:{id:"storeModal",tabindex:"-1",role:"dialog","aria-labelledby":"storeModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"storeModalLabel"}},[t._v("Add new store")]),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:t.closeModal}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),s("div",{staticClass:"modal-body"},[s("ul",{staticClass:"input-box"},[s("li",{staticClass:"col-12"},[t._v("store name:"),s("input",{directives:[{name:"model",rawName:"v-model",value:t.storeInfoTemp.name,expression:"storeInfoTemp.name"}],attrs:{type:"text"},domProps:{value:t.storeInfoTemp.name},on:{input:function(e){e.target.composing||t.$set(t.storeInfoTemp,"name",e.target.value)}}})]),s("li",{staticClass:"col-12"},[t._v("tables:"),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.tablesTemp,expression:"tablesTemp",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.tablesTemp},on:{input:function(e){e.target.composing||(t.tablesTemp=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),t._l(t.tablesTemp,(function(e,a){return s("li",{key:a,staticClass:"col-12"},[t._v(t._s(e)+"號桌 "),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.seatsTemp[e-1],expression:"seatsTemp[seat-1]",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.seatsTemp[e-1]},on:{input:function(s){s.target.composing||t.$set(t.seatsTemp,e-1,t._n(s.target.value))},blur:function(e){return t.$forceUpdate()}}})])})),s("li",{staticClass:"col-12"},[t._v(" cover: "),s("div",{staticClass:"d-flex flex-column w-75"},[s("span",{attrs:{id:"uploadFileBox"}},[s("input",{attrs:{type:"file",value:"upload",id:"fileButton"},on:{change:t.fileChanged}}),s("label",{attrs:{id:"fileButtonLabel",for:"fileButton"}},[t._v("Choose a photo")]),s("button",{attrs:{id:"uploadFile"},on:{click:t.uploadFile}},[t._v("上傳")])]),t.uploadCoverStart?s("span",{staticClass:"mt-2 d-flex align-items-center"},[s("progress",{class:{success:t.uploadCoverFinish},staticStyle:{width:"85%"},attrs:{id:"uploader",value:"0",max:"100"}}),s("span",{staticStyle:{width:"15%"},attrs:{id:"percentage"}},[t._v("0%")])]):t._e(),t.uploadCoverFinish&&!t.uploadCoverStart?s("span",[t._v(t._s(t.tempFileName+" ")+"已上傳完成")]):t._e()])])],2)]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.closeModal}},[t._v("Close")]),s("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.createStore}},[t._v("Save changes")])])])])]),s("div",{staticClass:"modal fade",attrs:{id:"tableModal",tabindex:"-1",role:"dialog","aria-labelledby":"tableModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"storeModalLabel"}},[t._v("Add new table")]),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:t.closeTableModal}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),s("div",{staticClass:"modal-body"},[s("ul",{staticClass:"input-box"},[s("li",{staticClass:"name"},[s("span",{staticClass:"title col-4"},[t._v("姓名")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newBkInfo[0].bkInfo.name,expression:"newBkInfo[0].bkInfo.name"}],staticClass:"col-8",attrs:{type:"text"},domProps:{value:t.newBkInfo[0].bkInfo.name},on:{input:function(e){e.target.composing||t.$set(t.newBkInfo[0].bkInfo,"name",e.target.value)}}})]),s("li",{staticClass:"seat"},[s("span",{staticClass:"title col-4"},[t._v("訂位數")]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.newBkInfo[0].bkInfo.seat,expression:"newBkInfo[0].bkInfo.seat",modifiers:{number:!0}}],staticClass:"seat col-8",attrs:{type:"number"},domProps:{value:t.newBkInfo[0].bkInfo.seat},on:{input:function(e){e.target.composing||t.$set(t.newBkInfo[0].bkInfo,"seat",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),s("li",{staticClass:"seatCount"},[s("span",{staticClass:"title col-4"},[t._v("桌座位數")]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.newBkInfo[0].bkInfo.seatCount,expression:"newBkInfo[0].bkInfo.seatCount",modifiers:{number:!0}}],staticClass:"seat col-8",attrs:{type:"number"},domProps:{value:t.newBkInfo[0].bkInfo.seatCount},on:{input:function(e){e.target.composing||t.$set(t.newBkInfo[0].bkInfo,"seatCount",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),s("li",{staticClass:"kidSeat"},[s("span",{staticClass:"title col-4"},[t._v("兒童座椅")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newBkInfo[0].bkInfo.kidSeat,expression:"newBkInfo[0].bkInfo.kidSeat"}],staticClass:"col-8",attrs:{type:"number"},domProps:{value:t.newBkInfo[0].bkInfo.kidSeat},on:{input:function(e){e.target.composing||t.$set(t.newBkInfo[0].bkInfo,"kidSeat",e.target.value)}}})]),s("li",{staticClass:"date"},[s("span",{staticClass:"title col-4"},[t._v("日期")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newBkInfo[0].bkInfo.date,expression:"newBkInfo[0].bkInfo.date"}],staticClass:"col-8",attrs:{type:"date"},domProps:{value:t.newBkInfo[0].bkInfo.date},on:{input:function(e){e.target.composing||t.$set(t.newBkInfo[0].bkInfo,"date",e.target.value)}}})]),s("li",{staticClass:"time"},[s("span",{staticClass:"title col-4"},[t._v("時間")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newBkInfo[0].bkInfo.time,expression:"newBkInfo[0].bkInfo.time"}],staticClass:"col-8",attrs:{type:"time"},domProps:{value:t.newBkInfo[0].bkInfo.time},on:{input:function(e){e.target.composing||t.$set(t.newBkInfo[0].bkInfo,"time",e.target.value)}}})]),s("li",{staticClass:"phone"},[s("span",{staticClass:"title col-4"},[t._v("電話")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newBkInfo[0].bkInfo.phone,expression:"newBkInfo[0].bkInfo.phone"}],staticClass:"col-8",attrs:{type:"text"},domProps:{value:t.newBkInfo[0].bkInfo.phone},on:{input:function(e){e.target.composing||t.$set(t.newBkInfo[0].bkInfo,"phone",e.target.value)}}})])])]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.closeTableModal}},[t._v("Close")]),s("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.createTable}},[t._v("Save changes")])])])])])])])],1)},o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"store-title"},[s("h4",[t._v("店舖名稱")]),s("span",{staticClass:"hr-line"})])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-12 px-2 mb-3"},[s("div",{staticClass:"card addRestaurant",attrs:{"data-toggle":"modal","data-target":"#storeModal","data-backdrop":"static"}},[t._v(" ADD "),s("br"),t._v(" RESTAURANT ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"store-title"},[s("span",{staticClass:"hr-line bottom"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-12 col-md-6 col-lg-4 col-xl-3 item addTable",attrs:{"data-toggle":"modal","data-target":"#tableModal","data-backdrop":"static"}},[s("div",{staticClass:"info"})])}],n=(s("99af"),s("caad"),s("fb6a"),s("b0c0"),s("b680"),s("2532"),s("498a"),s("260b")),r=(s("66ce"),s("ea7b"),s("588e"),n["a"].initializeApp({databaseURL:"https://chrstest-927f2-default-rtdb.firebaseio.com",storageBucket:"chrstest-927f2.appspot.com",apiKey:"AIzaSyDuk_kmqwZeyX_yCoBsxljyu6sHdVErops"}).database()),l={name:"App",components:{},data:function(){return{AIid:1,tablesTemp:0,seatsTemp:[],emailVerified:!1,uid:null,user:null,registerPage:!1,forgotPage:!1,storeInfoTemp:[{id:1,name:"",tables:[]}],store:[],storeName:"",documents:[],isShowDetail:!1,newBkInfo:[{bkInfo:{name:"",seat:0,seatCount:0,tableNum:0,kidSeat:0,date:this.getToday(),time:"",phone:""},isBooking:null,no:null}],drag:!1,uploadCoverStart:!1,uploadCoverFinish:!1,tempFileName:"",tempFileNameUrl:"",noCover:"https://chensangha.com/wp-content/plugins/ninja-forms/assets/img/no-image-available-icon-6.jpg"}},methods:{resetFileUploader:function(){var t=document.getElementById("fileButton"),e=document.getElementById("uploader"),s=document.getElementById("percentage"),a=document.getElementById("fileButtonLabel");t.value="",a.innerText="Choose a photo",s.innerText="0%",e.value=0},fileChanged:function(){var t=document.getElementById("fileButton"),e=document.getElementById("fileButtonLabel");e.innerText=t.files[0].name},uploadFile:function(){if(void 0!=document.getElementById("fileButton").files[0]&&"image/jpeg"===document.getElementById("fileButton").files[0].type&&void 0!==this.storeInfoTemp.name){this.uploadCoverStart=!0;var t=document.getElementById("fileButton"),e=t.files[0];this.tempFileName=e.name;var s=n["a"].storage().ref("store/"+this.user.uid+"/"+this.storeInfoTemp.name),a={contentType:"image/jpeg"},i=s.put(e,a),o=this;i.on("state_changed",(function(t){var e=t.bytesTransferred/t.totalBytes*100;e=e.toFixed(0);var s=document.getElementById("uploader"),a=document.getElementById("percentage");a.innerText=e+"%",s.value=e}),(function(){}),(function(){i.snapshot.ref.getDownloadURL().then((function(t){console.log("File available at",t),o.tempFileNameUrl=t})),o.resetFileUploader(),o.uploadCoverStart=!1,o.uploadCoverFinish=!0}))}else alert("Check file type is image/img? or store name is empty?")},test:function(){var t=n["a"].auth().currentUser;t.updateProfile({displayName:"Guest"})},test2:function(){var t=document.getElementById("fileButton"),e=t.files[0];console.log(e)},signIn:function(){var t=this;n["a"].auth().signInWithEmailAndPassword("guest@gmail.com","12345678").then((function(e){alert("Sign in success!"),t.user=e.user})).then((function(){t.updateFromFirebase()})).catch((function(t){console.log(t.message),alert("Sign in error!")}))},signOut:function(){var t=this,e=confirm("確定要登出".concat(this.user.email,"嗎?"));e&&n["a"].auth().signOut().then((function(){alert("Sign out success!"),t.resetStore(),t.uid=null})).catch((function(t){console.log(t.message),alert("Sign out error!")}))},registerPageToggle:function(){this.registerPage=!this.registerPage},registerUidSignIn:function(t){this.user=t,this.uid=t.uid},forgotPageToggle:function(){this.forgotPage=!this.forgotPage},resendValidationEmail:function(){var t=n["a"].auth().currentUser,e=this;t.sendEmailVerification().then((function(){e.$refs.mainInfo.classList.remove("show"),e.$refs.resendValidationEmail.classList.remove("show"),e.$refs.sendSuccess.classList.add("show")})).catch((function(t){alert(t)}))},updateSort:function(){this.drap=!1;var t=this.users;r.ref("/users/").set(t)},getToday:function(){var t=new Date,e=t.getFullYear(),s="0"+parseInt(t.getMonth()+1),a="0"+t.getDate();return e+"-"+s.slice(-2)+"-"+a.slice(-2)},updateInfo:function(){this.store[this.storeName].emptyTable=0;for(var t=0;t<this.store[this.storeName].tables.length;t++)this.store[this.storeName].tables[t].bkInfo.seat>0?(this.store[this.storeName].tables[t].bkInfo.name=this.store[this.storeName].tables[t].bkInfo.name.trim(),this.store[this.storeName].tables[t].bkInfo.phone=this.store[this.storeName].tables[t].bkInfo.phone.trim(),""==this.store[this.storeName].tables[t].bkInfo.name?(alert("訂位姓名不可為空！"),this.store[this.storeName].tables[t].bkInfo.seat=0):""==this.store[this.storeName].tables[t].bkInfo.date?(alert("訂位日期不可為空！"),this.store[this.storeName].tables[t].bkInfo.seat=0):""==this.store[this.storeName].tables[t].bkInfo.time?(alert("訂位時間不可為空！"),this.store[this.storeName].tables[t].bkInfo.seat=0):""==this.store[this.storeName].tables[t].bkInfo.phone||10!=this.store[this.storeName].tables[t].bkInfo.phone.length?(alert("聯絡電話格式有誤！"),this.store[this.storeName].tables[t].bkInfo.seat=0,this.store[this.storeName].tables[t].bkInfo.phone=""):this.store[this.storeName].tables[t].isBooking=!0):this.store[this.storeName].tables[t].isBooking=!1,0==this.store[this.storeName].tables[t].isBooking&&(this.store[this.storeName].emptyTable+=1);var e=this.store[this.storeName],s="".concat(this.user.uid,"/store/").concat(this.storeName);r.ref(s).set(e);var a=document.getElementsByClassName("saveSuccess");a[0].classList.add("show"),setTimeout((function(){a[0].classList.remove("show")}),1e3)},showDetail:function(t){this.isShowDetail=!0,this.storeName=t.target.closest(".card").dataset.store},createStore:function(){void 0==this.storeInfoTemp.name&&(this.storeInfoTemp.name="");var t=this.storeInfoTemp.name,e=!1;if(""!=t.trim()){var s=[];s.push(t.includes(".")),s.push(t.includes("#")),s.push(t.includes("$")),e=s.every((function(t){return 0==t}))}if(e){for(var a={id:this.AIid,name:this.storeInfoTemp.name,tables:[],emptyTable:0,coverUrl:this.tempFileNameUrl},i=0;i<this.tablesTemp;i++){var o={no:i+1,isBooking:!1,bkInfo:{name:"",seat:0,seatCount:0,kidSeat:0,date:this.getToday(),time:"",phone:""}};a.tables.push(o),0==a.tables[i].isBooking&&(a.emptyTable+=1),this.seatsTemp[i]<1?(alert("座位數最小值為2"),a.tables[i].bkInfo.seatCount=2):a.tables[i].bkInfo.seatCount=this.seatsTemp[i]}this.AIid+=1;var n="".concat(this.user.uid,"/store/").concat(a.name);r.ref(n).set(a),r.ref("/AIid/").set(this.AIid),this.closeModal()}else alert("店鋪名稱不可空白或包含 ' . ' 、 ' # ' 、 ' $ ' ，請重新輸入"),this.closeModal()},createTable:function(){var t=this.newBkInfo[0],e=this.store[this.storeName].tables.length;t.no=e+1,t.bkInfo.seatCount>0?t.bkInfo.seat>0?(t.isBooking=!0,this.store[this.storeName].tables.push(t),this.updateInfo()):(this.store[this.storeName].tables.push(t),this.updateInfo()):alert("座位數不可為0!"),this.closeTableModal()},closeModal:function(){this.storeInfoTemp=[{id:1,name:"",tables:[]}],this.tablesTemp=0,this.seatsTemp=[],this.uploadCoverFinish=!1,this.tempFileName="",this.tempFileNameUrl=""},closeTableModal:function(){this.newBkInfo[0].bkInfo.name="",this.newBkInfo[0].bkInfo.seat=0,this.newBkInfo[0].bkInfo.seatCount=0,this.newBkInfo[0].bkInfo.kidSeat=0,this.newBkInfo[0].bkInfo.date=this.getToday(),this.newBkInfo[0].bkInfo.time="",this.newBkInfo[0].bkInfo.phone=""},clearBooking:function(t){var e=confirm("要清除訂位資訊嗎？(不可回復)");if(e){for(var s=0;s<this.store[this.storeName].tables.length;s++)this.store[this.storeName].tables[s].no==t.no&&(this.store[this.storeName].tables[s].isBooking=!1,this.store[this.storeName].tables[s].bkInfo={name:"",seat:0,seatCount:this.store[this.storeName].tables[s].bkInfo.seatCount,kidSeat:0,date:this.getToday(),time:"",phone:""});this.updateInfo()}},deleteBooking:function(t){var e=confirm("要刪除此筆訂位嗎？(不可回復)");if(e){for(var s=0;s<this.store[this.storeName].tables.length;s++)if(this.store[this.storeName].tables[s].no==t.no){var a="".concat(this.user.uid,"/store/").concat(this.storeName,"/tables/").concat(s);r.ref(a).remove()}this.updateInfo()}},deleteStore:function(t){var e=confirm("要刪除這間分店嗎？(不可回復)");if(e){var s=t.target,a=s.nextElementSibling.dataset.store;r.ref("".concat(this.user.uid,"/store/").concat(a)).remove()}var i=document.getElementsByClassName("saveSuccess");i[0].classList.add("show"),setTimeout((function(){i[0].classList.remove("show")}),1e3),this.isShowDetail=!1,this.updateFromFirebase()},updateFromFirebase:function(){var t=this;r.ref("".concat(this.user.uid,"/store/")).on("value",(function(e){var s=e.val();t.store=s})),r.ref("/AIid/").on("value",(function(e){var s=e.val();t.AIid=s}))},resetStore:function(){this.store=null,this.isShowDetail=!1}},created:function(){var t=this;n["a"].auth().onAuthStateChanged((function(e){e?(t.uid=e.uid,t.emailVerified=e.emailVerified,t.user=e,t.updateFromFirebase()):(t.uid=null,t.emailVerified=null,t.user=null)}))},mounted:function(){},updated:function(){},watch:{},firebase:{documents:r.ref("documents")}},c=l,d=(s("7c55"),s("2877")),u=Object(d["a"])(c,i,o,!1,null,null,null),m=u.exports,f=s("0ff2"),p=(s("4989"),s("ab8b"),s("2f62"));a["a"].use(p["a"]);var v=new p["a"].Store({state:{uid:"test uid"},mutations:{signInUid:function(t,e){t.uid=e.uid}}}),h=v,g=s("8c4f"),b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"my-login-page"},[s("section",{},[s("div",{staticClass:"container"},[s("div",{staticClass:"row justify-content-md-center"},[s("div",{staticClass:"card-wrapper"},[s("div",{staticClass:"brand"},[t._v(" CHRS's Booking System ")]),s("div",{staticClass:"card fat"},[s("div",{staticClass:"card-body"},[s("h4",{staticClass:"card-title"},[t._v("Login")]),s("form",{staticClass:"my-login-validation",attrs:{method:"POST",novalidate:""}},[t._m(0),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"password"}},[t._v("Password "),s("a",{staticClass:"float-right",staticStyle:{"font-size":"12px",color:"#007bff",cursor:"pointer"},on:{click:function(e){return t.$emit("forgotPageToggle")}}},[t._v(" Forgot Password? ")])]),s("input",{staticClass:"form-control",attrs:{id:"password",type:"password",name:"password",required:"","data-eye":""}}),s("div",{staticClass:"invalid-feedback"},[t._v(" Password is required ")])]),t._m(1),s("div",{staticClass:"form-group m-0"},[s("button",{staticClass:"btn btn-primary btn-block text-center",attrs:{type:"submit"},on:{click:t.signInAction}},[t._v(" Login ")])]),s("div",{staticClass:"mt-4 text-center"},[t._v(" Don't have an account? "),s("a",{staticClass:"toggleButton",on:{click:function(e){return t.$emit("registerPageToggle")}}},[t._v("Create One")])])])])]),s("div",{staticClass:"footer"},[t._v(" Copyright © 2021 — CHRS?! ")])])])])])])},C=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"email"}},[t._v("E-Mail Address")]),s("input",{staticClass:"form-control",attrs:{id:"email",type:"email",name:"email",value:"",required:"",autofocus:""}}),s("div",{staticClass:"invalid-feedback"},[t._v(" Email is invalid ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-group"},[s("div",{staticClass:"custom-checkbox custom-control"},[s("input",{staticClass:"custom-control-input",attrs:{type:"checkbox",name:"remember",id:"remember"}}),s("label",{staticClass:"custom-control-label",attrs:{for:"remember"}},[t._v("Remember Me")])])])}],k=(s("7db0"),s("1157")),y=s.n(k),I={name:"SignIn",props:{},emits:["updateFormFirebase"],data:function(){return{user:null}},methods:{signInAction:function(){var t=this,e=y()("#email"),s=y()("#password");n["a"].auth().signInWithEmailAndPassword(e.val(),s.val()).then((function(e){alert("Sign in success!"),t.user=e.user})).then((function(){t.$emit("updateFromFirebase")})).catch((function(t){alert(t.message)}))}},mounted:function(){y()((function(){y()("input[type='password'][data-eye]").each((function(t){var e=y()(this),s="eye-password-"+t;e.wrap(y()("<div/>",{style:"position:relative",id:s})),e.css({paddingRight:60}),e.after(y()("<div/>",{html:"Show",class:"btn btn-primary btn-sm",id:"passeye-toggle-"+t}).css({position:"absolute",right:10,top:e.outerHeight()/2-12,padding:"2px 7px",fontSize:12,cursor:"pointer"})),e.after(y()("<input/>",{type:"hidden",id:"passeye-"+t}));var a=e.parent().parent().find(".invalid-feedback");a.length&&e.after(a.clone()),e.on("keyup paste",(function(){y()("#passeye-"+t).val(y()(this).val())})),y()("#passeye-toggle-"+t).on("click",(function(){e.hasClass("show")?(e.attr("type","password"),e.removeClass("show"),y()(this).removeClass("btn-outline-primary")):(e.attr("type","text"),e.val(y()("#passeye-"+t).val()),e.addClass("show"),y()(this).addClass("btn-outline-primary"))}))})),y()(".my-login-validation").submit((function(t){var e=y()(this);!1===e[0].checkValidity()?(t.preventDefault(),t.stopPropagation(),e.addClass("was-validated")):t.preventDefault()}))}))}},w=I,_=(s("0009"),Object(d["a"])(w,b,C,!1,null,"1285529e",null)),B=_.exports,S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"my-login-page"},[s("section",{},[s("div",{staticClass:"container"},[s("div",{staticClass:"row justify-content-md-center"},[s("div",{staticClass:"card-wrapper"},[s("div",{staticClass:"brand"},[t._v(" CHRS's Booking System ")]),s("div",{staticClass:"card fat"},[s("div",{staticClass:"card-body"},[s("h4",{staticClass:"card-title"},[t._v("Register")]),s("form",{staticClass:"my-login-validation",attrs:{method:"POST",novalidate:""}},[t._m(0),t._m(1),t._m(2),t._m(3),s("div",{staticClass:"form-group m-0"},[s("button",{staticClass:"btn btn-primary btn-block text-center",attrs:{type:"submit"},on:{click:t.registerUser}},[t._v(" Register ")])]),s("div",{staticClass:"mt-4 text-center"},[t._v(" Already have an account? "),s("a",{staticClass:"toggleButton",on:{click:function(e){return t.$emit("registerPageToggle")}}},[t._v("Login")])])])])]),s("div",{staticClass:"footer"},[t._v(" Copyright © 2021 — CHRS?! ")])])])])])])},x=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"name"}},[t._v("Name")]),s("input",{staticClass:"form-control",attrs:{id:"name",type:"text",name:"name",required:"",autofocus:""}}),s("div",{staticClass:"invalid-feedback"},[t._v(" What's your name? ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"email"}},[t._v("E-Mail Address")]),s("input",{staticClass:"form-control",attrs:{id:"email",type:"email",name:"email",required:""}}),s("div",{staticClass:"invalid-feedback"},[t._v(" Your email is invalid ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"password"}},[t._v("Password")]),s("input",{staticClass:"form-control",attrs:{id:"password",type:"password",name:"password",required:"","data-eye":""}}),s("div",{staticClass:"invalid-feedback"},[t._v(" Password is required ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-group"},[s("div",{staticClass:"custom-checkbox custom-control"},[s("input",{staticClass:"custom-control-input",attrs:{type:"checkbox",name:"agree",id:"agree",required:""}}),s("label",{staticClass:"custom-control-label",attrs:{for:"agree"}},[t._v("I agree to the "),s("a",{attrs:{href:"#"}},[t._v("Terms and Conditions")])]),s("div",{staticClass:"invalid-feedback"},[t._v(" You must agree with our Terms and Conditions ")])])])}],T={name:"Register",props:{},emits:["registerUidSignIn"],data:function(){return{user:null}},methods:{registerUser:function(){var t=y()("#name"),e=y()("#email"),s=y()("#password"),a=this;n["a"].auth().createUserWithEmailAndPassword(e.val(),s.val()).then((function(t){alert("Register success!"),a.user=t.user})).then((function(){var e=n["a"].auth().currentUser;e.updateProfile({displayName:t.val()})})).then((function(){a.$emit("registerUidSignIn",a.user),a.$emit("registerPageToggle")})).then((function(){a.$emit("updateFromFirebase")})).catch((function(t){var e=t.code,s=t.message;console.log(e,s)}))}},mounted:function(){y()((function(){y()("input[type='password'][data-eye]").each((function(t){var e=y()(this),s="eye-password-"+t;e.wrap(y()("<div/>",{style:"position:relative",id:s})),e.css({paddingRight:60}),e.after(y()("<div/>",{html:"Show",class:"btn btn-primary btn-sm",id:"passeye-toggle-"+t}).css({position:"absolute",right:10,top:e.outerHeight()/2-12,padding:"2px 7px",fontSize:12,cursor:"pointer"})),e.after(y()("<input/>",{type:"hidden",id:"passeye-"+t}));var a=e.parent().parent().find(".invalid-feedback");a.length&&e.after(a.clone()),e.on("keyup paste",(function(){y()("#passeye-"+t).val(y()(this).val())})),y()("#passeye-toggle-"+t).on("click",(function(){e.hasClass("show")?(e.attr("type","password"),e.removeClass("show"),y()(this).removeClass("btn-outline-primary")):(e.attr("type","text"),e.val(y()("#passeye-"+t).val()),e.addClass("show"),y()(this).addClass("btn-outline-primary"))}))})),y()(".my-login-validation").submit((function(t){var e=y()(this);!1===e[0].checkValidity()?(t.preventDefault(),t.stopPropagation(),e.addClass("was-validated")):t.preventDefault()}))}))}},N=T,P=(s("b7a6"),Object(d["a"])(N,S,x,!1,null,"07774912",null)),F=P.exports,E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"my-login-page"},[s("section",{},[s("div",{staticClass:"container"},[s("div",{staticClass:"row justify-content-md-center"},[s("div",{staticClass:"card-wrapper"},[s("div",{staticClass:"brand"},[t._v(" CHRS's Booking System ")]),s("div",{staticClass:"card fat"},[s("div",{staticClass:"card-body"},[s("div",{staticClass:"card-body"},[s("h4",{staticClass:"card-title"},[t._v("Forgot Password")]),s("form",{staticClass:"my-login-validation",attrs:{method:"POST",novalidate:""}},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"d-flex justify-content-between",attrs:{for:"email"}},[t._v("E-Mail Address "),s("span",{staticStyle:{"font-size":"12px",color:"#007bff",cursor:"pointer"},on:{click:function(e){return t.$emit("forgotPageToggle")}}},[t._v("Back to Login")])]),s("input",{staticClass:"form-control",attrs:{id:"email",type:"email",name:"email",value:"",required:"",autofocus:""}}),s("div",{staticClass:"invalid-feedback"},[t._v(" Email is invalid ")]),s("div",{staticClass:"form-text text-muted"},[t._v(' By clicking "Reset Password" we will send a password reset link ')])]),s("div",{staticClass:"form-group m-0"},[s("button",{staticClass:"btn btn-primary btn-block text-center",attrs:{type:"submit"},on:{click:t.sendPasswordResetEmail}},[t._v(" Reset Password ")])])])])])]),s("div",{staticClass:"footer"},[t._v(" Copyright © 2021 — CHRS?! ")])])])])])])},$=[],A={name:"Forgot",props:{},data:function(){return{user:null}},methods:{sendPasswordResetEmail:function(){var t=n["a"].auth(),e=y()("#email"),s=e.val(),a=this;t.sendPasswordResetEmail(s).then((function(){alert("Reset password email is sended!"),a.$emit("forgotPageToggle")})).catch((function(t){alert(t.message)}))}},mounted:function(){y()((function(){y()("input[type='password'][data-eye]").each((function(t){var e=y()(this),s="eye-password-"+t;e.wrap(y()("<div/>",{style:"position:relative",id:s})),e.css({paddingRight:60}),e.after(y()("<div/>",{html:"Show",class:"btn btn-primary btn-sm",id:"passeye-toggle-"+t}).css({position:"absolute",right:10,top:e.outerHeight()/2-12,padding:"2px 7px",fontSize:12,cursor:"pointer"})),e.after(y()("<input/>",{type:"hidden",id:"passeye-"+t}));var a=e.parent().parent().find(".invalid-feedback");a.length&&e.after(a.clone()),e.on("keyup paste",(function(){y()("#passeye-"+t).val(y()(this).val())})),y()("#passeye-toggle-"+t).on("click",(function(){e.hasClass("show")?(e.attr("type","password"),e.removeClass("show"),y()(this).removeClass("btn-outline-primary")):(e.attr("type","text"),e.val(y()("#passeye-"+t).val()),e.addClass("show"),y()(this).addClass("btn-outline-primary"))}))})),y()(".my-login-validation").submit((function(t){var e=y()(this);!1===e[0].checkValidity()?(t.preventDefault(),t.stopPropagation(),e.addClass("was-validated")):t.preventDefault()}))}))}},U=A,R=(s("0547"),Object(d["a"])(U,E,$,!1,null,"c7865ee2",null)),D=R.exports;a["a"].use(g["a"]);var M=[{path:"/",components:{default:B,Register:F,Forgot:D}}],O=new g["a"]({mode:"history",base:"/vue2-firebase/",routes:M}),j=O;a["a"].use(f["a"]),a["a"].config.productionTip=!1,new a["a"]({router:j,store:h,render:function(t){return t(m)}}).$mount("#app")},"63b7":function(t,e,s){},"7c55":function(t,e,s){"use strict";s("2395")},a7bf:function(t,e,s){},b7a6:function(t,e,s){"use strict";s("a7bf")},f677:function(t,e,s){}});
//# sourceMappingURL=app.71ce11e7.js.map